🎸 プロジェクト要件定義

（コード解析・演奏用WEBアプリ）

1. 目的

バンド演奏時に使用するコード確認ツール

再生機能なし（リファレンス特化）

GitHub Pagesで公開可能

PWA対応（オフライン利用可能）

2. 対象環境

PC専用（初期版）

縦スクロールUI

モダンブラウザ（Chrome / Edge / Safari）

3. 画面構成
3.1 上段ヘッダー（固定）

表示項目：

曲名（編集可能）

Key（±トランスポーズ対応）

BPM（手入力）

表示モード切替

通常

簡略（テンション省略）

Nashville Number

保存 / 読込（JSON）

常に position: sticky

3.2 メインエリア
基本単位

4小節 = 1段ブロック

縦スクロール

左カラム：セクション表示

右側：4小節 × 各小節4拍（16拍）

3.3 レイアウト構造
┌────────┬──────────────────────────────┐
│Intro   │ | C | C | C | C | Am | ...  │
│        │ |   |   |キメ|   |    |break│
└────────┴──────────────────────────────┘

4. セル仕様（1拍単位）
4.1 表示

1拍 = 1セル

セル内構成：

上段：コード（太字）

下段：コメント（小文字）

コメント有りの場合は小インジケータ表示

4.2 編集仕様

セルクリックでポップオーバー表示

編集可能項目：

コード（手入力 + 候補表示）

Key設定

デフォルト：曲全体に従う

上書き可能（転調対応）

コメント（自由入力）

クイックタグボタン

キメ

ブレイク

休符

フィル

キュー

操作：

Enter：保存

Esc：キャンセル

Tab：次フィールド

Cmd/Ctrl + →/←：前後拍移動

5. コード候補ロジック

優先順位：

Song内最近使用コード

Global最近使用コード（localStorage）

現在Keyのダイアトニック候補

一般頻出コード

入力中にサジェスト表示。

6. 表示モード
6.1 通常

例：Cmaj7, G7(13)

6.2 簡略

例：Cmaj7 → C
G7(13) → G7

6.3 Nashville

例：C（Key=C） → I
Am（Key=C） → vi

7. データ構造
type Beat = {
  measure: number
  beat: 1 | 2 | 3 | 4
  chord: string
  comment?: string
  keyOverride?: string
  confidence?: number
}

type Section = {
  name: string
  startMeasure: number
}


保存形式：JSON